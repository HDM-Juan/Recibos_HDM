<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recibo de Venta - Hospital del Móvil</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="header">
        <img src="https://i.imgur.com/jbcrBn7.jpg" alt="Encabezado de Recibo"> 
    </div>
    
    <div class="company-name" id="nombreEmpresa"></div>
    <div class="company-info">
        <p id="direccion"></p>
        <p>Email: <span id="email"></span></p>
        <p>Tel. <span id="telefono"></span></p>
        <p>www.hospitaldelmovil.com.mx</p>
        <p>WhatsApp <span id="whatsapp"></span></p>
    </div>

    <div class="receipt-header">
        <h3>FOLIO: <span id="folioVenta"></span></h3>
        <p>FECHA: <span id="fechaVenta"></span></p>
        <h4>FOLIO RECEPCIÓN: <span id="folioRecepcion"></span></h4>
        <p>IMEI: <span id="imei"></span></p>
        <p>No. Serie: <span id="noSerie"></span></p>
    </div>

    <div class="promo-banner">
        <img id="publicidadUrl" alt="Promociones">
    </div>

    <h2>DETALLE DE VENTA</h2>
    <table>
        <thead>
            <tr>
                <th>No.</th>
                <th>Concepto</th>
                <th>Precio Unitario</th>
                <th>Subtotal</th>
            </tr>
        </thead>
        <tbody id="tablaDetalleVenta"></tbody>
    </table>
    <p class="total"><strong>TOTAL DE LA VENTA:</strong> <span id="totalVenta"></span></p>

    <h2>PAGOS</h2>
    <table>
        <thead>
            <tr>
                <th>Cantidad</th>
                <th>Forma de Pago</th>
            </tr>
        </thead>
        <tbody id="tablaPagosVenta"></tbody>
    </table>
    <p class="total"><strong>TOTAL DE PAGOS:</strong> <span id="totalPagos"></span></p>

    <div class="garantia">
        <h3>Garantía</h3>
        <p id="textoGarantia"></p>
        <p>Observaciones: <span id="observaciones"></span></p>

        <div class="signature">
            <img id="firmaVenta" alt="Firma Recibir Equipo/accesorios">
            <p>____________________</p>
        </div>
    </div>

    <div class="avisos">
        <p>Conoce nuestro AVISO DE PRIVACIDAD en www.hospitaldelmovil.com.mx/aviso-de-privacidad/</p>
        <p>Quejas y Sugerencias en <strong>administracion@hospitaldelmovil.com.mx</strong></p>
    </div>

    <div class="footer">
        <img src="https://i.imgur.com/Hqy6qeU.jpg" alt="Redes Sociales" class="social-media">
        <p id="folio_venta"></p>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Obtener parámetros de la URL
            const params = new URLSearchParams(window.location.search);
            
            // Función para asignar valores
            function setElementContent(id, value) {
                const element = document.getElementById(id);
                if (element) {
                    if (element.tagName.toLowerCase() === 'img') {
                        element.src = value || '';
                    } else {
                        element.innerHTML = decodeURIComponent(value || '');
                    }
                }
            }

            // Asignar valores a los elementos
            [
                'folio_venta', 'folioVenta', 'fechaVenta', 'nombreEmpresa',
                'direccion', 'email', 'telefono', 'whatsapp', 'publicidadURL',
                'folioRecepcion', 'imei', 'noSerie', 'totalVenta', 'totalPagos',
                'textoGarantia', 'firmaVenta', 'observaciones', 'redesSocialesUrl',
                'receiptUrl'
            ].forEach(id => {
                setElementContent(id, params.get(id));
            });

            // Manejar las tablas
            document.querySelector('#tablaDetalleVenta').innerHTML = 
                decodeURIComponent(params.get('tablaDetalleVenta') || '');
            document.querySelector('#tablaPagosVenta').innerHTML = 
                decodeURIComponent(params.get('tablaPagosVenta') || '');
        });

        // Imprimir automáticamente después de cargar todo
        window.onload = function() {
            setTimeout(() => {
                window.print();
            }, 1000);
        };
    </script>
</body>
</html>
